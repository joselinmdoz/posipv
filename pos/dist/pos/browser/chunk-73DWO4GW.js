import{e as D}from"./chunk-EKOQI3CN.js";import{Aa as S,Db as w,Ea as C,I as b,Ka as E,La as t,M as y,Ma as n,N as h,Ya as e,Za as l,ba as p,gb as _,hb as M,j as f,pa as o,v,xb as P,yb as O,zb as k}from"./chunk-EVJ26B7U.js";var s=class a{constructor(i){this.http=i}summary(){return this.http.get("/api/dashboard/summary")}static \u0275fac=function(d){return new(d||a)(y(w))};static \u0275prov=b({token:a,factory:a.\u0275fac,providedIn:"root"})};function z(a,i){a&1&&(t(0,"div",24)(1,"div",25),e(2,"Sin datos todav\xEDa"),n(),t(3,"div",2),e(4,"Conecta el backend a "),t(5,"code"),e(6,"/api/dashboard/summary"),n(),e(7," para llenar el dashboard."),n()())}var I=class a{api=h(s);summary=p(null);error=p(null);constructor(){this.api.summary().pipe(v(i=>(this.error.set("dashboard_summary_failed"),f(null)))).subscribe(i=>this.summary.set(i))}money(i){return i==null?"\u2014":new Intl.NumberFormat(void 0,{style:"currency",currency:"USD"}).format(i)}static \u0275fac=function(d){return new(d||a)};static \u0275cmp=S({type:a,selectors:[["ng-component"]],decls:95,vars:9,consts:[[1,"page"],[1,"page-head"],[1,"muted"],[1,"actions"],["routerLink","/pos",1,"btn","primary"],["routerLink","/register",1,"btn"],[1,"grid"],[1,"card"],[1,"k"],[1,"v"],[1,"s"],[1,"v","small"],[1,"split"],[1,"panel"],[1,"panel-head"],[1,"tiles"],["routerLink","/pos",1,"tile"],[1,"t"],[1,"d","muted"],["routerLink","/cash",1,"tile"],["routerLink","/stock-movements",1,"tile"],["routerLink","/reports/sales",1,"tile"],["class","note",4,"ngIf"],[1,"check"],[1,"note"],[1,"b"]],template:function(d,r){if(d&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),e(4,"Dashboard"),n(),t(5,"p",2),e(6,"Visi\xF3n r\xE1pida del negocio y atajos para operar."),n()(),t(7,"div",3)(8,"a",4),e(9,"Ir a TPV"),n(),t(10,"a",5),e(11,"Abrir / Cambiar Caja"),n()()(),t(12,"div",6)(13,"div",7)(14,"div",8),e(15,"Ventas hoy"),n(),t(16,"div",9),e(17),n(),t(18,"div",10),e(19,"Transacciones: "),t(20,"b"),e(21),n()()(),t(22,"div",7)(23,"div",8),e(24,"Sesiones abiertas"),n(),t(25,"div",9),e(26),n(),t(27,"div",10),e(28,"Cajas activas ahora mismo"),n()(),t(29,"div",7)(30,"div",8),e(31,"Stock bajo"),n(),t(32,"div",9),e(33),n(),t(34,"div",10),e(35,"Productos por debajo del m\xEDnimo"),n()(),t(36,"div",7)(37,"div",8),e(38,"\xDAltima venta"),n(),t(39,"div",11),e(40),_(41,"date"),n(),t(42,"div",10),e(43,"Hora estimada del \xFAltimo ticket"),n()()(),t(44,"div",12)(45,"div",13)(46,"div",14)(47,"h2"),e(48,"Operaci\xF3n"),n(),t(49,"p",2),e(50,"Acciones comunes durante el d\xEDa."),n()(),t(51,"div",15)(52,"a",16)(53,"div",17),e(54,"Vender"),n(),t(55,"div",18),e(56,"Crear tickets y cobrar"),n()(),t(57,"a",19)(58,"div",17),e(59,"Caja"),n(),t(60,"div",18),e(61,"Entradas / salidas y cierre"),n()(),t(62,"a",20)(63,"div",17),e(64,"Inventario"),n(),t(65,"div",18),e(66,"Entradas, salidas y transferencias"),n()(),t(67,"a",21)(68,"div",17),e(69,"Reportes"),n(),t(70,"div",18),e(71,"Ventas e IPV"),n()()()(),t(72,"div",13)(73,"div",14)(74,"h2"),e(75,"Estado del sistema"),n(),t(76,"p",2),e(77,"Mensajes y recordatorios."),n()(),C(78,z,8,0,"div",22),t(79,"ul",23)(80,"li"),e(81,"Usa una "),t(82,"b"),e(83,"Caja"),n(),e(84," por turno: apertura, ventas, movimientos de caja y cierre."),n(),t(85,"li"),e(86,"Los cambios de inventario deben pasar por "),t(87,"b"),e(88,"entradas/salidas"),n(),e(89," con motivo."),n(),t(90,"li"),e(91,"El "),t(92,"b"),e(93,"IPV"),n(),e(94," te cuadra el d\xEDa: inicio + entradas - salidas - vendido = final."),n()()()()()),d&2){let c,u,g,x,m;o(17),l(r.money((c=r.summary())==null?null:c.salesToday)),o(4),l(((u=r.summary())==null?null:u.transactionsToday)??"\u2014"),o(5),l(((g=r.summary())==null?null:g.openSessions)??"\u2014"),o(7),l(((x=r.summary())==null?null:x.lowStock)??"\u2014"),o(7),l((m=r.summary())!=null&&m.lastSaleAt?M(41,6,(m=r.summary())==null?null:m.lastSaleAt,"short"):"\u2014"),o(38),E("ngIf",r.error())}},dependencies:[k,P,D,O],styles:[".page[_ngcontent-%COMP%]{padding:18px}.page-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;align-items:flex-end;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin:0;font-size:24px;letter-spacing:-.02em}.muted[_ngcontent-%COMP%]{color:var(--muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#fff;text-decoration:none}.btn.primary[_ngcontent-%COMP%]{background:var(--brand);color:#fff;border-color:transparent}.grid[_ngcontent-%COMP%]{margin-top:14px;display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}@media(max-width:1100px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(max-width:640px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow-sm)}.k[_ngcontent-%COMP%]{font-size:12px;color:var(--muted)}.v[_ngcontent-%COMP%]{font-size:26px;font-weight:800;margin-top:6px}.v.small[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.s[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:var(--muted)}.split[_ngcontent-%COMP%]{margin-top:14px;display:grid;grid-template-columns:1.2fr .8fr;gap:12px}@media(max-width:980px){.split[_ngcontent-%COMP%]{grid-template-columns:1fr}}.panel[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow-sm)}.panel-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px}.panel-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0 0}.tiles[_ngcontent-%COMP%]{margin-top:10px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}@media(max-width:640px){.tiles[_ngcontent-%COMP%]{grid-template-columns:1fr}}.tile[_ngcontent-%COMP%]{display:block;padding:12px;border-radius:14px;border:1px dashed var(--border);text-decoration:none;background:linear-gradient(180deg,#fff,#fafafa)}.tile[_ngcontent-%COMP%]:hover{border-style:solid}.t[_ngcontent-%COMP%]{font-weight:800}.d[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.note[_ngcontent-%COMP%]{margin-top:10px;padding:12px;border-radius:14px;border:1px solid rgba(255,0,0,.18);background:#ff000008}.b[_ngcontent-%COMP%]{font-weight:800}.check[_ngcontent-%COMP%]{margin:10px 0 0;padding-left:16px;color:var(--muted);font-size:13px}"]})};export{I as DashboardComponent};
