import{a as I}from"./chunk-P5KSWAQ2.js";import{e as N}from"./chunk-EKOQI3CN.js";import{a as T}from"./chunk-OGHJEGVW.js";import{a as F,b as V,c as A,d as D,j as R}from"./chunk-5CMZHIZT.js";import"./chunk-XZ3PRBQD.js";import{Aa as C,Ea as v,Ka as c,La as e,Ma as t,N as x,Oa as P,Pa as S,Qa as g,S as b,T as h,Ya as n,Za as E,ab as _,ba as l,bb as y,cb as M,j as u,pa as s,v as f,wb as O,xb as w,zb as k}from"./chunk-EVJ26B7U.js";function L(a,d){a&1&&(e(0,"div",2),n(1,"Backend pendiente: "),e(2,"code"),n(3,"/api/settings/payment-methods"),t()())}function j(a,d){if(a&1){let i=P();e(0,"div",13)(1,"div")(2,"code"),n(3),t()(),e(4,"div")(5,"input",14),M("ngModelChange",function(o){let m=b(i).index,p=g();return y(p.methods()[m].name,o)||(p.methods()[m].name=o),h(o)}),t()(),e(6,"div",10)(7,"input",15),M("ngModelChange",function(o){let m=b(i).index,p=g();return y(p.methods()[m].enabled,o)||(p.methods()[m].enabled=o),h(o)}),t()()()}if(a&2){let i=d.$implicit,r=d.index,o=g();s(3),E(i.code),s(2),_("ngModel",o.methods()[r].name),s(2),_("ngModel",o.methods()[r].enabled)}}var W=class a{api=x(I);toast=x(T);methods=l([]);busy=l(!1);error=l(null);constructor(){this.api.listPaymentMethods().pipe(f(()=>(this.error.set("methods_failed"),u([{code:"CASH",name:"Efectivo",enabled:!0},{code:"TRANSFER",name:"Transferencia",enabled:!0},{code:"CARD",name:"Tarjeta",enabled:!1},{code:"OTHER",name:"Otro",enabled:!1}])))).subscribe(d=>this.methods.set(d))}save(){this.busy.set(!0),this.api.savePaymentMethods(this.methods()).pipe(f(()=>(this.toast.push({kind:"error",title:"No se pudo guardar",message:"Verifica /api/settings/payment-methods"}),u(null)))).subscribe(()=>{this.toast.push({kind:"success",title:"Guardado",message:"M\xE9todos de pago actualizados"}),this.busy.set(!1)})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=C({type:a,selectors:[["ng-component"]],decls:31,vars:3,consts:[[1,"page"],[1,"page-head"],[1,"muted"],[1,"actions"],["routerLink","/settings",1,"btn"],[1,"btn","primary",3,"click","disabled"],[1,"card"],["class","muted",4,"ngIf"],[1,"table"],[1,"th"],[1,"r"],["class","tr",4,"ngFor","ngForOf"],[1,"note","mt"],[1,"tr"],[3,"ngModelChange","ngModel"],["type","checkbox",3,"ngModelChange","ngModel"]],template:function(i,r){i&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),n(4,"M\xE9todos de pago"),t(),e(5,"p",2),n(6,"Activa/desactiva m\xE9todos y define el nombre visible."),t()(),e(7,"div",3)(8,"a",4),n(9,"Volver"),t(),e(10,"button",5),S("click",function(){return r.save()}),n(11,"Guardar"),t()()(),e(12,"div",6),v(13,L,4,0,"div",7),e(14,"div",8)(15,"div",9)(16,"div"),n(17,"C\xF3digo"),t(),e(18,"div"),n(19,"Nombre"),t(),e(20,"div",10),n(21,"Activo"),t()(),v(22,j,8,3,"div",11),t(),e(23,"div",12),n(24," Recomendaci\xF3n: usa "),e(25,"b"),n(26,"EFECTIVO"),t(),n(27," y "),e(28,"b"),n(29,"TRANSFERENCIA"),t(),n(30,' como base. Lo dem\xE1s es "nice to have". '),t()()()),i&2&&(s(10),c("disabled",r.busy()),s(3),c("ngIf",r.error()),s(9),c("ngForOf",r.methods()))},dependencies:[k,O,w,R,V,F,A,D,N],styles:[".page[_ngcontent-%COMP%]{padding:18px}.page-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;align-items:flex-end;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin:0;font-size:22px;letter-spacing:-.02em}.muted[_ngcontent-%COMP%]{color:var(--muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#fff;cursor:pointer;text-decoration:none}.btn.primary[_ngcontent-%COMP%]{background:var(--brand);color:#fff;border-color:transparent}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow-sm);margin-top:12px}.table[_ngcontent-%COMP%]{margin-top:10px;border:1px solid var(--border);border-radius:14px;overflow:hidden}.th[_ngcontent-%COMP%], .tr[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr .6fr;gap:10px;padding:10px 12px;align-items:center}.th[_ngcontent-%COMP%]{background:#fafafa;font-size:12px;color:var(--muted);font-weight:700}.tr[_ngcontent-%COMP%]{border-top:1px solid var(--border)}.r[_ngcontent-%COMP%]{text-align:right}input[type=text][_ngcontent-%COMP%], input[_ngcontent-%COMP%]:not([type]){width:100%;padding:10px;border-radius:12px;border:1px solid var(--border);outline:none}.mt[_ngcontent-%COMP%]{margin-top:12px}.note[_ngcontent-%COMP%]{padding:12px;border-radius:14px;border:1px dashed var(--border);color:var(--muted)}code[_ngcontent-%COMP%]{background:#f6f6f6;border:1px solid #eee;padding:2px 6px;border-radius:10px}"]})};export{W as PaymentMethodsComponent};
