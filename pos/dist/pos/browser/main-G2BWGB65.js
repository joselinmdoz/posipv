import{a as v}from"./chunk-YWTIGOUW.js";import{a as B,c as J,d as h,e as K,f as Q,g as X}from"./chunk-EKOQI3CN.js";import{a as A}from"./chunk-IJJ5UOPG.js";import{a as Y}from"./chunk-OGHJEGVW.js";import"./chunk-XZ3PRBQD.js";import{Aa as k,Ea as u,Eb as H,F as D,Fb as W,Ka as l,La as t,Ma as o,N as a,Na as j,Oa as M,Pa as I,Qa as f,S as _,T as y,Va as V,W as L,Wa as U,Ya as r,Za as b,aa as N,ba as T,fb as q,ib as z,kb as C,pa as s,vb as $,wb as G,xb as O,zb as S}from"./chunk-EVJ26B7U.js";var p=()=>{let e=a(v),i=a(h);return e.isLoggedIn()?!0:(i.navigateByUrl("/login"),!1)};var R=()=>{let e=a(A),i=a(h);return e.selectedId()?!0:(i.navigateByUrl("/register"),!1)};var m=()=>{let e=a(v),i=a(h),n=e.user();return n?n.role==="ADMIN"?!0:(i.navigateByUrl("/dashboard"),!1):(i.navigateByUrl("/login"),!1)};var Z=[{path:"login",loadComponent:()=>import("./chunk-R5OKVMM7.js").then(e=>e.LoginComponent)},{path:"dashboard",canActivate:[p],loadComponent:()=>import("./chunk-73DWO4GW.js").then(e=>e.DashboardComponent)},{path:"tpv",canActivate:[p],loadComponent:()=>import("./chunk-7DLPIFAM.js").then(e=>e.TPVComponent)},{path:"pos",canActivate:[p,R],loadComponent:()=>import("./chunk-WQ3MWZPC.js").then(e=>e.PosComponent)},{path:"cash",canActivate:[p,R],loadComponent:()=>import("./chunk-WSGQH7T2.js").then(e=>e.CashComponent)},{path:"products",canActivate:[p,m],loadComponent:()=>import("./chunk-AEB2RJA4.js").then(e=>e.ProductsComponent)},{path:"warehouses",canActivate:[p,m],loadComponent:()=>import("./chunk-DCNIMRJX.js").then(e=>e.WarehousesComponent)},{path:"stock-movements",canActivate:[p,m],loadComponent:()=>import("./chunk-BPWRN4JO.js").then(e=>e.StockMovementsComponent)},{path:"ipv-initial",canActivate:[p,m],loadComponent:()=>import("./chunk-L3RQZ7VE.js").then(e=>e.IpvInitialComponent)},{path:"reports/sales",canActivate:[p,m],loadComponent:()=>import("./chunk-5IOPTYZD.js").then(e=>e.SalesReportComponent)},{path:"reports/ipv",canActivate:[p,m],loadComponent:()=>import("./chunk-UEEQXXPG.js").then(e=>e.IpvReportComponent)},{path:"settings",canActivate:[p,m],loadComponent:()=>import("./chunk-VUTJJNXB.js").then(e=>e.TpvSettingsComponent)},{path:"settings/payment-methods",canActivate:[p,m],loadComponent:()=>import("./chunk-F5XQMEYM.js").then(e=>e.PaymentMethodsComponent)},{path:"settings/denominations",canActivate:[p,m],loadComponent:()=>import("./chunk-P7ZYWCBG.js").then(e=>e.DenominationsComponent)},{path:"users",canActivate:[p,m],loadComponent:()=>import("./chunk-F6RDYDTF.js").then(e=>e.UsersComponent)},{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"**",loadComponent:()=>import("./chunk-LSZSHHV5.js").then(e=>e.NotFoundComponent)}];var ee=(e,i)=>{let c=a(v).token();return i(c?e.clone({setHeaders:{Authorization:`Bearer ${c}`}}):e)};var te={providers:[N(),X(Z),H(W([ee]))]};function ne(e,i){let c=!i?.manualCleanup?i?.injector?.get(L)??a(L):null,d=oe(i?.equal),g;i?.requireSync?g=T({kind:0},{equal:d}):g=T({kind:1,value:i?.initialValue},{equal:d});let E,F=e.subscribe({next:x=>g.set({kind:1,value:x}),error:x=>{g.set({kind:2,error:x}),E?.()},complete:()=>{E?.()}});if(i?.requireSync&&g().kind===0)throw new D(601,!1);return E=c?.onDestroy(F.unsubscribe.bind(F)),C(()=>{let x=g();switch(x.kind){case 1:return x.value;case 2:throw x.error;case 0:throw new D(601,!1)}},{equal:i?.equal})}function oe(e=Object.is){return(i,n)=>i.kind===1&&n.kind===1&&e(i.value,n.value)}var se=e=>["toast",e];function ce(e,i){if(e&1&&(t(0,"div",6),r(1),o()),e&2){let n=f().$implicit;s(),b(n.title)}}function pe(e,i){if(e&1){let n=M();t(0,"div",2),u(1,ce,2,1,"div",3),t(2,"div",4),r(3),o(),t(4,"button",5),I("click",function(){let d=_(n).$implicit,g=f();return y(g.toast.dismiss(d.id))}),r(5,"\u2715"),o()()}if(e&2){let n=i.$implicit;l("ngClass",q(3,se,n.kind)),s(),l("ngIf",n.title),s(2),b(n.message)}}var P=class e{toast=a(Y);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=k({type:e,selectors:[["pos-toast"]],decls:2,vars:1,consts:[["aria-live","polite","aria-relevant","additions",1,"toasts"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","title",4,"ngIf"],[1,"msg"],["aria-label","Cerrar",1,"x",3,"click"],[1,"title"]],template:function(n,c){n&1&&(t(0,"div",0),u(1,pe,6,5,"div",1),o()),n&2&&(s(),l("ngForOf",c.toast.toasts()))},dependencies:[S,$,G,O],styles:[".toasts[_ngcontent-%COMP%]{position:fixed;right:14px;bottom:14px;z-index:1000;display:flex;flex-direction:column;gap:10px;max-width:360px}.toast[_ngcontent-%COMP%]{position:relative;padding:12px 34px 12px 12px;border-radius:14px;background:#111;color:#fff;box-shadow:0 10px 30px #0000002e;border:1px solid rgba(255,255,255,.12)}.toast.success[_ngcontent-%COMP%]{background:#0f5132}.toast.error[_ngcontent-%COMP%]{background:#842029}.toast.info[_ngcontent-%COMP%]{background:#0a58ca}.toast.warning[_ngcontent-%COMP%]{background:#664d03}.title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:2px}.msg[_ngcontent-%COMP%]{font-size:13px;opacity:.95}.x[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;border:none;background:transparent;color:inherit;cursor:pointer;font-size:14px;opacity:.85}.x[_ngcontent-%COMP%]:hover{opacity:1}"]})};function de(e,i){e&1&&(t(0,"a",19),r(1,"Reportes"),o())}function le(e,i){if(e&1&&(t(0,"div",20),r(1," TPV: "),t(2,"b"),r(3),o()()),e&2){let n=f(2);s(3),b(n.register.selectedId())}}function me(e,i){if(e&1){let n=M();t(0,"header",5)(1,"div",6)(2,"span",7),r(3,"POS"),o(),t(4,"span",8),r(5,"Panel"),o()(),t(6,"nav",9)(7,"a",10),r(8,"Dashboard"),o(),t(9,"a",11),r(10,"TPV"),o(),u(11,de,2,0,"a",12),o(),t(12,"div",13),u(13,le,4,1,"div",14),t(14,"div",15)(15,"span",16),r(16),o(),t(17,"span",17),r(18),o()(),t(19,"button",18),I("click",function(){_(n);let d=f();return y(d.logout())}),r(20,"Salir"),o()()()}if(e&2){let n,c,d=f();s(11),l("ngIf",d.isAdmin()),s(2),l("ngIf",d.register.selectedId()),s(3),b((n=d.user())==null?null:n.email),s(2),b((c=d.user())==null?null:c.role)}}function ue(e,i){e&1&&(t(0,"header",21)(1,"div",6)(2,"span",7),r(3,"POS"),o(),t(4,"span",8),r(5,"Panel"),o()(),t(6,"div",22),r(7,"Inicia sesi\xF3n para comenzar."),o()())}function ge(e,i){e&1&&(t(0,"div",24)(1,"div",25),r(2,"Inventario"),o(),t(3,"a",29),r(4,"Productos"),o(),t(5,"a",30),r(6,"Almacenes"),o(),t(7,"a",31),r(8,"Movimientos"),o(),t(9,"a",32),r(10,"IPV inicial"),o()())}function fe(e,i){e&1&&(t(0,"div",24)(1,"div",25),r(2,"Reportes"),o(),t(3,"a",19),r(4,"Ventas por producto"),o(),t(5,"a",33),r(6,"IPV por sesi\xF3n"),o()())}function ve(e,i){e&1&&(t(0,"div",24)(1,"div",25),r(2,"Admin"),o(),t(3,"a",34),r(4,"Configuraci\xF3n"),o(),t(5,"a",35),r(6,"Usuarios"),o()())}function xe(e,i){if(e&1&&(t(0,"aside",23)(1,"div",24)(2,"div",25),r(3,"Operaci\xF3n"),o(),t(4,"a",10),r(5,"Dashboard"),o(),t(6,"a",26),r(7,"TPV"),o()(),u(8,ge,11,0,"div",27)(9,fe,7,0,"div",27)(10,ve,7,0,"div",27),t(11,"div",28)(12,"div"),r(13,"Orden & disciplina."),o(),t(14,"div"),r(15,"La caja no miente\u2026 solo revela."),o()()()),e&2){let n=f();s(8),l("ngIf",n.isAdmin()),s(),l("ngIf",n.isAdmin()),s(),l("ngIf",n.isAdmin())}}var w=class e{auth=a(v);register=a(A);user=ne(this.auth.user$,{initialValue:null});isLoggedIn=C(()=>!!this.user());isAdmin=C(()=>this.user()?.role==="ADMIN");logout(){this.auth.logout(),location.href="/login"}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=k({type:e,selectors:[["app-root"]],decls:8,vars:5,consts:[["publicTop",""],["class","topbar",4,"ngIf","ngIfElse"],[1,"layout"],["class","sidebar",4,"ngIf"],[1,"content"],[1,"topbar"],[1,"brand"],[1,"logo"],[1,"title"],[1,"topnav"],["routerLink","/dashboard","routerLinkActive","active"],["routerLink","/pos","routerLinkActive","active"],["routerLink","/reports/sales","routerLinkActive","active",4,"ngIf"],[1,"right"],["class","chip",4,"ngIf"],[1,"user"],[1,"email"],[1,"role"],[1,"btn",3,"click"],["routerLink","/reports/sales","routerLinkActive","active"],[1,"chip"],[1,"topbar","public"],[1,"muted"],[1,"sidebar"],[1,"section"],[1,"h"],["routerLink","/tpv","routerLinkActive","active"],["class","section",4,"ngIf"],[1,"footer","muted"],["routerLink","/products","routerLinkActive","active"],["routerLink","/warehouses","routerLinkActive","active"],["routerLink","/stock-movements","routerLinkActive","active"],["routerLink","/ipv-initial","routerLinkActive","active"],["routerLink","/reports/ipv","routerLinkActive","active"],["routerLink","/settings","routerLinkActive","active"],["routerLink","/users","routerLinkActive","active"]],template:function(n,c){if(n&1&&(u(0,me,21,4,"header",1)(1,ue,8,0,"ng-template",null,0,z),t(3,"div",2),u(4,xe,16,3,"aside",3),t(5,"main",4),j(6,"router-outlet"),o()(),j(7,"pos-toast")),n&2){let d=V(2);l("ngIf",c.isLoggedIn())("ngIfElse",d),s(3),U("logged",c.isLoggedIn()),s(),l("ngIf",c.isLoggedIn())}},dependencies:[S,O,J,K,Q,P],styles:[".topbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;height:56px;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:0 14px;background:#ffffffeb;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}.topbar.public[_ngcontent-%COMP%]{justify-content:space-between}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;-webkit-user-select:none;user-select:none}.logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:12px;background:var(--brand);color:#fff;font-weight:900;letter-spacing:-.03em}.title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:-.02em}.topnav[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;padding:8px 10px;border-radius:12px;color:var(--muted);border:1px solid transparent}.topnav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#0f172a;background:#f5f5f5;border-color:var(--border)}.right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.user[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1.1;padding-right:6px}.email[_ngcontent-%COMP%]{font-weight:800;font-size:12px}.role[_ngcontent-%COMP%]{font-size:11px;color:var(--muted)}.chip[_ngcontent-%COMP%]{border:1px solid var(--border);background:#fff;border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}.btn[_ngcontent-%COMP%]{border:1px solid var(--border);background:#fff;border-radius:12px;padding:8px 10px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{border-color:#0f172a2e}.layout[_ngcontent-%COMP%]{display:block}.layout.logged[_ngcontent-%COMP%]{display:grid;grid-template-columns:260px 1fr;gap:0;min-height:calc(100vh - 56px)}.sidebar[_ngcontent-%COMP%]{border-right:1px solid var(--border);background:#fff;padding:12px;display:flex;flex-direction:column;gap:12px}.section[_ngcontent-%COMP%]   .h[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin:4px 8px}.section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;text-decoration:none;padding:10px 12px;border-radius:14px;color:#0f172abd;border:1px solid transparent}.section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#fafafa;border-color:var(--border)}.section[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#f5f5f5;border-color:var(--border);color:#0f172a;font-weight:800}.footer[_ngcontent-%COMP%]{margin-top:auto;padding:10px 12px;border-radius:14px;border:1px dashed var(--border)}.content[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}@media(max-width:980px){.layout.logged[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%], .topnav[_ngcontent-%COMP%]{display:none}}"]})};B(w,te).catch(e=>console.error(e));
