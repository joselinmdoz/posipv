<header class="topbar" *ngIf="isLoggedIn(); else publicTop">
  <div class="brand">
    <span class="logo">POS</span>
    <span class="title">Panel</span>
  </div>

  <nav class="topnav">
    <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
    <a routerLink="/pos" routerLinkActive="active">TPV</a>
    <a routerLink="/reports/sales" routerLinkActive="active" *ngIf="isAdmin()">Reportes</a>
  </nav>

  <div class="right">
    <div class="chip" *ngIf="register.selectedId()">
      TPV: <b>{{ register.selectedId() }}</b>
    </div>

    <div class="user">
      <span class="email">{{ user()?.email }}</span>
      <span class="role">{{ user()?.role }}</span>
    </div>

    <button class="btn" (click)="logout()">Salir</button>
  </div>
</header>

<ng-template #publicTop>
  <header class="topbar public">
    <div class="brand">
      <span class="logo">POS</span>
      <span class="title">Panel</span>
    </div>
    <div class="muted">Inicia sesión para comenzar.</div>
  </header>
</ng-template>

<div class="layout" [class.logged]="isLoggedIn()">
  <aside class="sidebar" *ngIf="isLoggedIn()">
    <div class="section">
      <div class="h">Operación</div>
      <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
      <a routerLink="/tpv" routerLinkActive="active">TPV</a>
    </div>

    <div class="section" *ngIf="isAdmin()">
      <div class="h">Inventario</div>
      <a routerLink="/products" routerLinkActive="active">Productos</a>
      <a routerLink="/warehouses" routerLinkActive="active">Almacenes</a>
      <a routerLink="/stock-movements" routerLinkActive="active">Movimientos</a>
      <a routerLink="/ipv-initial" routerLinkActive="active">IPV inicial</a>
    </div>

    <div class="section" *ngIf="isAdmin()">
      <div class="h">Reportes</div>
      <a routerLink="/reports/sales" routerLinkActive="active">Ventas por producto</a>
      <a routerLink="/reports/ipv" routerLinkActive="active">IPV por sesión</a>
    </div>

    <div class="section" *ngIf="isAdmin()">
      <div class="h">Admin</div>
      <a routerLink="/settings" routerLinkActive="active">Configuración</a>
      <a routerLink="/users" routerLinkActive="active">Usuarios</a>
    </div>

    <div class="footer muted">
      <div>Orden & disciplina.</div>
      <div>La caja no miente… solo revela.</div>
    </div>
  </aside>

  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>

<pos-toast></pos-toast>
