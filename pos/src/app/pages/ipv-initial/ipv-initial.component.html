    <div class="page">
      <div class="page-head">
        <div>
          <h1>IPV Inicial</h1>
          <p class="muted">Carga el inventario inicial por almacén antes del turno (base para el IPV).</p>
        </div>
        <button class="btn primary" (click)="save()" [disabled]="!warehouseId || busy()">Guardar</button>
      </div>

      <div class="card">
        <div class="filters">
          <label>
            <span>Almacén</span>
            <select [(ngModel)]="warehouseId" (ngModelChange)="loadStock()">
              <option value="">— Seleccionar —</option>
              <option *ngFor="let w of warehouses()" [value]="w.id">{{ w.name }}</option>
            </select>
          </label>
          <div class="muted" *ngIf="error()">Backend pendiente: <code>/api/ipv/initial</code></div>
        </div>

        <div class="table" *ngIf="warehouseId">
          <div class="th">
            <div>Producto</div>
            <div class="r">Stock actual</div>
            <div class="r">IPV inicial</div>
          </div>

          <div class="tr" *ngFor="let l of stock(); let i = index">
            <div class="name">{{ l.name }}</div>
            <div class="r">{{ l.qty }}</div>
            <div class="r">
              <input type="number" min="0" step="1" [(ngModel)]="initial()[i].qty" />
            </div>
          </div>

          <div class="empty" *ngIf="stock().length===0 && !busyStock()">Sin datos.</div>
        </div>

        <div class="note mt">
          Consejo: si el turno inicia en un almacén TPV, el IPV inicial debería coincidir con lo que realmente hay en estantería.
        </div>
      </div>
    </div>